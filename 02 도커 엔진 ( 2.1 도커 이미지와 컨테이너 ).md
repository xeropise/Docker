### **2.1 도커 이미지와 컨테이너**

- 도커 엔진에서 사용하는 기본 단위는 이미지와 컨테이너

- 이 두가지가 도커 엔진의 핵심으로, 이미지와 컨테이너가 무엇이고 어떤 방식으로 사용되는지 이해해 보자.

### 2.1.1 도커 이미지

- 이미지는 컨테이너를 생성할 때 필요한 요소, 가상 머신을 생성할 때 사용하는 iso 파일과 비슷한 개념이다. 이미지는 여러 개의 계층으로 된 바이너리 파일로 존재, 컨테이너를 생성하고 실행할 때 읽기 전용으로 사용된다.

- 이미지는 도커 명령어로 내려받을 수 있으므로 별도로 설치할 필요는 없다.

- 도커에서 사용하는 이미지의 이름은 기본적으로 \[저장소 이름\]/\[이미지 이름\]:\[태그\] 의 형태로 구성이 된다.

```
xeropise/centOs:14.04   xeropise/latest
```

- 저장소(Repository) : 이미지가 저장된 장소를 의미하는데, 저장소 이름이 명시되지 않은 이미지는 도커에서 기본적으로 제공하는 이미지 저장소인 도커 허브(Docker Hub)의 공식 이미지를 뜻한다. 그러나 이미지를 생성할 때 저장소 이름을 명시할 필요는 없으므로 생략하는 경우도 있다. 도커 허브에 저장될 이미지라는 것을 명시하기 위해 docker.io 를 붙이기도 한다.

- 이미지 이름 : 해당 이미지가 어떤 역할을 하는지 나타낸다.(자유 이긴하지만) 이미지의 이름은 생략할 수 없고, 반드시 설정해야 한다.

- 태그 : 이미지의 버전 관리, 혹은 리비전 관리에 사용한다. 태그를 생략하는 경우 도커 엔진은 이미지의 태그를 latest 로 인식한다.

### 2.1.2 도커 컨테이너

- 도커 이미지는 우분투, CentOS 등 기본적인 리눅스 운영체제부터 아파치 웹 서버, MySQL 데이터베이스 등의 각종 애플리케이션, 하둡이나 스파크, 스톰 등의 빅데이터 분석 도구까지 갖가지 종류가 있다.

- **이러한 이미지로 컨테이너를 생성하면 해당 이미지의 목적에 맞는 파일이 들어 있는 파일 시스템과 격리된 시스템 자원 및 네트워크를 사용할 수 있는 독립도니 공간이 생성되고, 이것이 바로 도커 컨테이너가 된다.**

![img (2)](https://user-images.githubusercontent.com/50399804/120428845-594f6280-c3af-11eb-9d1e-b7edcf7b6607.png)

- 대부분의 도커 컨테이너는 생성될 때 사용된 도커 이미지의 종류에 따라 알맞은 설정과 파일을 가지고 있기 때문에 도커 이미지의 목적에 맞도록 사용되는 것이 일반적이다.

- 웹 서버 도커 이미지로부터 여러 개의 컨테이너를 생성하면 생성된 컨테이너의 개수만큼 웹 서버가 생성되고, 이 컨테이너들이 외부에 웹 서비스를 제공하는 데 사용된다.

- 컨테이너는 이미지를 읽기 전용으로 사용하되 이미지에서 변경된 사항만 컨테이너 계층에 저장하므로 컨테이너에서 무엇을 하든지 원래 이미지는 영향을 받지 않는다.

- 생성된 각 컨테이너는 각기 독립된 파일시스템을 제공받으면 호스트와 분리돼 있으므로 특정 컨테이너에서 어떤 애플리케이션을 설치하거나 삭제해도 다른 컨테이너와 호스트는 변화가 없다.

- 우분투 도커 이미지로, 2개의 컨테이너를 생성하고 A 컨테이너에는 MySQL 을, B 컨테이너에는 아파치 웹 서버를 설치해도 각 컨테이너는 서로 영향을 주지 않을뿐더러 호스트에도 아무런 영향을 주지 않는다.

![service_docker_img](https://user-images.githubusercontent.com/50399804/120430386-e72c4d00-c3b1-11eb-8895-0151998a7376.png)
